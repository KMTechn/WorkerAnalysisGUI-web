# 데이터 연동 및 시스템 통합 분석 보고서

## 개요
이 문서는 Container_Audit, Inspection_worker, Label_Match 시스템에서 생성되는 데이터를 WorkerAnalysisGUI-web 프로그램이 수신하고 분석하는 현황을 정리한 문서입니다.

---

## 1. 데이터 소스 분석

### 1.1 Container_Audit (이적 검사 시스템)
- **데이터 경로**: `C:\Sync\이적검사이벤트로그_[작업자명]_[YYYYMMDD].csv`
- **주요 특징**:
  - 100% 양품 처리 (불량품 판정 없음)
  - 트레이 보류/복구 기능
  - 개별 제품 교환 지원
  - 신형 현품표 양식 지원 (PHS 필드 포함)

### 1.2 Inspection_worker (품질 검사 시스템)
- **데이터 경로**: `C:\Sync\검사작업이벤트로그_[작업자명]_[YYYYMMDD].csv`
- **주요 특징**:
  - 양품/불량품 판정 기능 (F12 페달)
  - 리워크 모드 지원
  - 불량품 통합 처리 (48개 단위)
  - 잔량표/불량표 라벨 생성

### 1.3 Label_Match (바코드 검증 시스템)
- **데이터 형태**: 독립적인 바코드 검증 로그 (JSON 형식)
- **주요 특징**:
  - 5단계 순차 바코드 스캔 검증
  - 설정 가능한 검증 규칙 (`validation_rules.csv`)
  - 실시간 오디오 피드백
  - 자동 업데이트 기능 (GitHub 연동)
- **데이터 저장**: 일별 JSON 로그 파일로 상태 저장
- **분석 연동**: 현재 WorkerAnalysisGUI-web와 직접적인 데이터 연동은 없음

---

## 2. WorkerAnalysisGUI-web 데이터 수신 상태

### 2.1 현재 설정 상태 ✅
- **로그 폴더 경로**: `C:\Sync` (정상 설정됨)
- **파일 감시**: Watchdog를 통한 실시간 파일 변경 감지 활성화
- **데이터 캐싱**: OptimizedDataManager를 통한 성능 최적화 적용

### 2.2 지원하는 데이터 타입 ✅
1. **포장실작업이벤트로그**: 포장 공정 데이터
2. **이적검사이벤트로그**: Container_Audit 시스템 데이터
3. **검사작업이벤트로그**: Inspection_worker 시스템 데이터
4. **Label_Match 데이터**: ⚠️ 현재 미연동 (JSON 형식, 별도 처리 필요)

### 2.3 실제 데이터 확인 결과 ✅
```
C:\Sync 폴더에서 확인된 데이터:
- 이적작업이벤트로그_*.csv: 다수 파일 존재
- 검사작업이벤트로그_*.csv: 다수 파일 존재
- 포장실작업이벤트로그_*.csv: 다수 파일 존재
- 최신 데이터: 2025-09-30까지 데이터 확인됨
```

---

## 3. 데이터 연동 품질 분석

### 3.1 데이터 구조 호환성 ✅
- **CSV 컬럼 구조**: 표준화된 형식으로 일관성 유지
- **timestamp**: ISO 8601 형식 지원
- **details 필드**: JSON 형식으로 상세 정보 저장
- **이벤트 타입**: 체계적인 이벤트 분류

### 3.2 실시간 처리 능력 ✅
- **파일 감시**: 5초 간격 중복 방지 로직
- **소켓 통신**: Flask-SocketIO를 통한 실시간 업데이트
- **캐싱 전략**: 세션 단위 캐싱으로 성능 최적화

### 3.3 데이터 무결성 ✅
- **세션 완결성**: SESSION_START/COMPLETE 쌍 검증
- **시간 순서**: 타임스탬프 순서 확인
- **바코드 중복**: 동일 세션 내 중복 스캔 감지

---

## 4. 분석 기능 현황

### 4.1 지원하는 분석 메트릭
- **생산성 지표**: 시간당 처리량, 평균 완료 시간, 효율성 비교
- **품질 지표**: 불량률, 초도수율, 오류 발생 패턴
- **시스템 사용 패턴**: 모드별 사용 빈도, 유휴 시간 분석

### 4.2 레이더 차트 분석
```json
{
  "포장실": {
    "세트완료시간": "avg_work_time",
    "첫스캔준비성": "avg_latency",
    "무결점달성률": "first_pass_yield",
    "세트당PCS": "avg_pcs_per_tray"
  },
  "이적실": {
    "신속성": "avg_work_time",
    "준속성": "avg_latency",
    "초도수율": "first_pass_yield",
    "안정성": "work_time_std"
  },
  "검사실": {
    "신속성": "avg_work_time",
    "준비성": "avg_latency",
    "무결점달성률": "first_pass_yield",
    "안정성": "work_time_std",
    "품질 정확도": "defect_rate"
  }
}
```

---

## 5. 시스템 아키텍처 연동도

```
[Container_Audit] ──┐
                    │
[Inspection_worker] ─┼──► [C:\Sync] ──► [WorkerAnalysisGUI-web] ──► [실시간 대시보드]
                    │       │                     │
[기타 시스템] ──────┘       │                     └──► [분석 리포트]
                            │
[Label_Match] ──────────────┼──► [별도 JSON 로그] ──► [독립적 분석]
                            │
                            └──► [아카이브/백업]
```

**주의**: Label_Match는 현재 C:\Sync 경로와 다른 독립적인 데이터 저장 구조를 사용하므로 WorkerAnalysisGUI-web와 직접 연동되지 않습니다.

---

## 6. 데이터 흐름 검증 결과

### 6.1 ✅ 정상 작동 확인사항
1. **데이터 생성**: Container_Audit 및 Inspection_worker에서 정상적으로 CSV 로그 생성
2. **파일 저장**: C:\Sync 폴더에 올바른 명명 규칙으로 저장
3. **실시간 감지**: Watchdog를 통한 파일 변경 감지 정상 작동
4. **데이터 파싱**: CSV 파일의 구조적 파싱 및 JSON details 필드 처리 정상
5. **분석 처리**: 세션 단위 분석 및 메트릭 계산 정상

### 6.2 🔍 모니터링 권장사항
1. **디스크 용량**: C:\Sync 폴더의 지속적인 용량 모니터링
2. **파일 잠금**: 프로그램 실행 중 파일 접근 충돌 방지
3. **성능 최적화**: 대용량 데이터 처리 시 메모리 사용량 모니터링

---

## 7. 문제점 및 개선사항

### 7.1 현재 식별된 문제점
- **Label_Match 시스템 미연동**: Label_Match 바코드 검증 시스템이 WorkerAnalysisGUI-web와 연동되지 않음
- **데이터 형식 불일치**: Label_Match는 JSON 형식, 다른 시스템들은 CSV 형식 사용

### 7.2 향후 개선 제안
1. **Label_Match 연동**: JSON 로그 데이터를 CSV 형식으로 변환하거나 JSON 파서 추가
2. **통합 대시보드**: 바코드 검증 결과를 종합 분석에 포함
3. **데이터 압축**: 오래된 로그 파일 자동 압축 기능
4. **백업 전략**: 정기적인 데이터 백업 자동화
5. **알림 시스템**: 데이터 처리 오류 시 실시간 알림
6. **확장성**: 새로운 시스템 연동을 위한 플러그인 아키텍처

---

## 8. 결론

WorkerAnalysisGUI-web 프로그램은 Container_Audit과 Inspection_worker 시스템에서 생성되는 데이터를 **정상적으로 수신하고 분석**하고 있습니다. Label_Match 시스템은 현재 독립적으로 운영되고 있으며, 향후 통합 연동을 통해 더욱 포괄적인 분석이 가능할 것입니다.

### 핵심 성과
- ✅ **데이터 수신**: 실시간 파일 감시 및 처리 정상
- ✅ **분석 기능**: 다양한 메트릭을 통한 종합적 분석 제공
- ✅ **성능 최적화**: 캐싱 및 최적화된 데이터 처리
- ✅ **사용자 인터페이스**: 웹 기반 실시간 대시보드 제공

시스템 간 데이터 연동이 안정적으로 구축되어 있으며, 향후 확장 및 개선을 통해 더욱 강화된 분석 플랫폼으로 발전할 수 있습니다.

---

**문서 작성일**: 2025-09-30
**분석 대상 시스템**: Container_Audit, Inspection_worker, Label_Match, WorkerAnalysisGUI-web
**데이터 검증 기간**: 2025-09-19 ~ 2025-09-30